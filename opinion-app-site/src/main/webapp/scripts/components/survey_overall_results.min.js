var partial=0;var completed=0;var total=0;var response={controls:{list:[]}};function makeGradientColor(c,b,f){var e={};function d(h,g){return(h+Math.round((g-h)*(f/100)))}function a(g){g=Math.min(g,255);g=Math.max(g,0);var h=g.toString(16);if(h.length<2){h="0"+h}return(h)}e.r=d(c.r,b.r);e.g=d(c.g,b.g);e.b=d(c.b,b.b);e.cssColor="#"+a(e.r)+a(e.g)+a(e.b);return(e)}var blue={r:59,g:89,b:152};var lightGrey={r:235,g:238,b:244};function getColors(c){var a=[];for(var b=0;b<c;b+=1){a.push(makeGradientColor(blue,lightGrey,(100/c)*b).cssColor)}return a}(function(a){surveyOverallResults=function(b){var d=$.extend({opinionId:null,callback:null},b);var h=1;var g=1;var f=function(){$(".container-control-includes").find("div.bar").each(function(j,k){var l=Math.max($(k).attr("data-value")*$(k).parents(".outer-bar").width()/100,2)+"px";$(k).css({width:l})})};var c=function(){$("li.result-control .label-control-number").each(function(j,k){$(k).html(g+j+".&nbsp;")})};var e=function(){var i=function(k){var j=function(){getResponseResults({accountId:accountId,opinionId:d.opinionId,sheetId:k,success:function(r){partial=r.partial;completed=r.completed;total=partial+completed;response.controls.list=r.controls.list;$("#placeholder_results ul.list-result-controls").empty();function q(v){var t=[];for(var u=0;u<r.controls.list.length;u++){if(r.controls.list[u].parentId==v){t.push(r.controls.list[u])}}return t}for(var s=0;s<sheets.length;s++){if(k!=undefined){if(sheets[s].sheetId==k){var p=$('<li><div class="result-page-title">Page '+(s+1)+(sheets[s].title!=undefined?": "+sheets[s].title:"")+"</div><ul></ul></li>").appendTo("ul.list-result-controls");var o=p.find("ul");var m=q(sheets[s].sheetId);if(m.length!=0){for(var n=0;n<m.length;n++){var l=$("<li/>").appendTo(o);l.addClass("result-control c"+m[n].controlId);l.resultControl({opinionId:d.opinionId,controlId:m[n].controlId,controlTypeId:m[n].controlTypeId,controlIndex:n});l.attr({controlid:m[n].controlId,controlindex:n})}}else{o.append('<li class="result-control-empty">There are no questions on this page.</li>')}break}}else{var p=$('<li><div class="result-page-title">Page '+(s+1)+(sheets[s].title!=undefined?": "+sheets[s].title:"")+"</div><ul></ul></li>").appendTo("ul.list-result-controls");var o=p.find("ul");var m=q(sheets[s].sheetId);if(m.length!=0){for(var n=0;n<m.length;n++){var l=$("<li/>").appendTo(o);l.addClass("result-control c"+m[n].controlId);l.resultControl({opinionId:d.opinionId,controlId:m[n].controlId,controlTypeId:m[n].controlTypeId,controlIndex:n});l.attr({controlid:m[n].controlId,controlindex:n})}}else{o.append('<li class="result-control-empty">There are no questions on this page.</li>')}}}c();f();$("#label_responses_started").text($.addCommas((r.completed+r.partial)));$("#label_responses_completed").text($.addCommas(r.completed));$("#label_responses_partial").text($.addCommas(r.partial));if((r.completed+r.partial)!=0){$("#label_responses_completion_rate").text(((r.completed/(r.completed+r.partial))*100).toFixed(2)+"%")}else{$("#label_responses_completion_rate").text("0.00%")}},error:function(l){}})};if(k!=undefined){getStartIndexOfSheet({accountId:accountId,sheetId:k,success:function(l){h=l.startIndex;g=l.startNumerator;j()},error:function(){}})}else{h=1;g=1;j()}};getSheets({accountId:accountId,opinionId:d.opinionId,success:function(l){sheets=l.list;var k=[];k.push({label:"All Pages",value:0,active:true,click:function(m){}});for(var j=0;j<sheets.length;j++){k.push({label:"Page "+(j+1),value:sheets[j].sheetId,click:function(m){}})}$("#button_pages").dropdownButton({disabled:false,actions:k,change:function(m){if(m!=0){i(m)}else{i()}}});i()},error:function(){sheets=[]}})};e()}})(jQuery);